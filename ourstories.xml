<?xml version="1.0" encoding="UTF-8" ?>
<Module>
  <ModulePrefs title="Our Stories" 
    title_url="http://groups.google.com/group/Google-Gadgets-API" 
    scrolling="true">
  </ModulePrefs>
  <UserPref name="num_entries" display_name="Number of Entries:" default_value="4"/>
  <Content type="html">
  <![CDATA[

  <style>
a:link {
    text-decoration: none;
    color: #77797c;
}
a:visited {
    text-decoration: none;
    color: #000099;
}
a:hover {
    text-decoration: underline;
    color: #77797c;
}
a:active {
    text-decoration: underline;
    color: #000099;
}
</style>

<TABLE style="width:100%;height:100px;">
  <TR>
  <TD id="cell00">
  </TD>
  <TD id="cell10">
  </TD>
  <TD id="cell20">
  </TD>
  <TD id="cell30">
  </TD>
  </TR>
  </TABLE>

  <script type="text/javascript">

  // Get userprefs
  var prefs = new gadgets.Prefs();
  var entries = prefs.getInt("num_entries");

  function getFeed() {  
    var params = {};  
    params[gadgets.io.RequestParameters.CONTENT_TYPE] = gadgets.io.ContentType.FEED;  
    var url = "http://feeds.feedburner.com/Nzhgpa-ourstories";
    //var url = "https://www.youtube.com/feeds/videos.xml?playlist_id=PLpVYLDpbv9r6F9ykRsswRl2gXUEOYl35Y";
    gadgets.io.makeRequest(url, response, params);
  };

  function response(obj) { 
    
    var feed = obj.data;
   
    var summry = "";
    var text = "";
    var cell1 = "";
    var cell2 = "";
    var div = document.createElement("div");
    
    //for (var i = 0; i < 4; i++) {
      //var descstrg1 = feed.split("<media:thumbnail");
     // var descstrg2 = descstrg1[i+1].split('url="');
      //var descstrg3 = descstrg2[i+1].split('" height');
      //var image = descstrg3[0];
    //};      
    
    for (var i = 0; i < 4; i++) {
// <media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://1.bp.blogspot.com/-8j6Fj_Sm6hY/VO5xBIKociI/AAAAAAAACEw/8bJnzuzwwXI/s72-c/low.jpeg" height="72" width="72" />
      cell1 = "cell" + i + "0";
      //cell2 = "cell" + i + "1";
        summry = feed.Entry[i].Content;
        div.innerHTML = summry;
        text = div.textContent;
      document.getElementById(cell1).textContent = text;
      //document.getElementById(cell2).innerHTML = cell2;
    };
  };   
  
  gadgets.util.registerOnLoadHandler(getFeed);
  </script>
  ]]>
  </Content>
</Module>
